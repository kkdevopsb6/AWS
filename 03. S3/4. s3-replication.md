# AWS S3 Replication Complete In-Depth Documentation

## 1. What is S3 Replication

In Amazon S3, replication is a feature that automatically copies objects from one S3 bucket, called the source bucket, to another S3 bucket, called the destination bucket.

Replication works asynchronously and operates at the object level. Once configured, every qualifying object uploaded to the source bucket is copied automatically to the destination bucket based on defined rules.

---

## 2. Types of S3 Replication

### Same Region Replication

Same Region Replication copies objects between two different buckets within the same AWS region.

This is commonly used when data needs to be logically separated but does not need geographic redundancy.

Typical use cases include log separation, compliance auditing, analytics processing, and separating production data from reporting data.

Example
A production application uploads logs to one bucket, and those logs are replicated to another bucket in the same region that is accessible only to the security or audit team.

---

### Cross Region Replication

Cross Region Replication copies objects from a bucket in one AWS region to a bucket in another AWS region.

This is mainly used for disaster recovery, business continuity, regulatory compliance, and serving content closer to global users.

Example
Application data stored in an India region bucket is replicated to a US region bucket to protect against regional outages.

---

## 3. Mandatory Prerequisites for Replication

Replication will not work unless all required conditions are met.

### Versioning Requirement

Versioning must be enabled on both the source bucket and the destination bucket.
If versioning is disabled on either bucket, replication cannot be configured.

### Bucket Requirement

The source bucket and destination bucket must be different buckets.
Replication is never supported within the same bucket.

For same region replication, both buckets are in the same region.
For cross region replication, buckets are in different regions.

### IAM Role Requirement

Replication uses an IAM role that allows Amazon S3 to read objects from the source bucket and write objects to the destination bucket.

This role is created automatically during configuration or can be selected manually.

---

## 4. Replication Rule Fundamentals

Replication is controlled using replication rules.

Each rule defines:

* Which objects should be replicated
* Where those objects should be replicated
* How replication should behave

Multiple rules can exist in a single bucket.

---

## 5. Replication Rule Filters

Replication can be limited using filters.

### Prefix Based Replication

Only objects with a specific prefix are replicated.

Example
If the prefix is logs/, only objects stored under logs/ will replicate.

### Tag Based Replication

Only objects with a specific tag key and value are replicated.

Example
Only objects with tag replicate = yes will be copied.

### Entire Bucket Replication

If no filter is defined, all objects in the bucket are replicated.

---

## 6. Replication Controls and Advanced Options

### Replication of Existing Objects

By default, replication applies only to objects uploaded after replication is enabled.

Objects that already existed before enabling replication are not replicated automatically.

To replicate existing objects, batch replication must be used.

---

### Replication Time Control

Replication Time Control provides a service-level agreement that objects will be replicated within 15 minutes.

This is mainly used for compliance or near real-time disaster recovery scenarios and has additional cost.

---

### Delete Marker Replication

When an object is deleted in a versioned bucket, a delete marker is created.

You can configure whether delete markers should be replicated to the destination bucket.

Permanent deletes are never replicated.

---

### Encrypted Object Replication

Objects encrypted with SSE-S3 are replicated automatically.

Objects encrypted with SSE-KMS require explicit permission:

* The replication IAM role must have permission to use the source KMS key
* The replication IAM role must have permission to use the destination KMS key

Missing KMS permissions is one of the most common causes of silent replication failure.

---

### Destination Storage Class Control

During replication, you can change the storage class of replicated objects.

Example
Objects stored as S3 Standard in the source bucket can be replicated as S3 Standard-IA in the destination bucket to reduce cost.

---

## 7. What S3 Replication Does Not Replicate

S3 replication does not replicate:

* Objects uploaded before replication was enabled
* Objects already replicated from another bucket
* Bucket policies
* Lifecycle rules
* Bucket configurations
* Object ACL changes

Only object data and object metadata are replicated.

---

## 8. Ownership and Cross Account Replication

Replication can occur within the same AWS account or across different AWS accounts.

For cross-account replication:

* Destination bucket policy must allow replication from the source account
* Ownership settings must be handled carefully

Best practice is to enable destination bucket owner override to avoid access issues.

---

## 9. Monitoring and Troubleshooting Replication

Replication status is visible at the object level as pending, completed, or failed.

CloudWatch provides replication metrics such as replication latency and failure counts.

Common replication failures include:

* Versioning disabled
* Missing KMS permissions
* Incorrect destination bucket policy
* Ownership conflicts

---

## 10. Real World Use Cases

Disaster recovery by replicating production data to another region
Compliance by copying sensitive data to a secure audit account
Analytics by replicating production data to a reporting bucket
Global applications by replicating data closer to users

---

## 11. Cost Considerations

Replication incurs cost for:

* PUT requests in the destination bucket
* Storage used in the destination bucket
* Inter-region data transfer for cross region replication
* Replication Time Control if enabled

Replication is not a free feature.

---

## 12. Simple Explanation Line

S3 replication automatically copies objects from one bucket to another, within the same region or across regions, using versioning and replication rules to support disaster recovery, compliance, and data distribution.
